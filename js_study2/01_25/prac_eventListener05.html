<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>prac_eventListener05</title>
    <style>
      input[type='text'] {
        width: 100px;
      }

      label {
        display: inline-block;
        width: 50px;
      }

      #result {
        display: inline-block;
        margin-left: 15px;
      }
    </style>
  </head>
  <body>
    <h3>산수 문제를 풀어 봅시다.</h3>
    <p>수식을 계산하여 답을 입력하고 채점 버튼을 누르세요.</p>
    <hr />
    <form action="">
      <label for="p1">5*6</label>
      <input type="text" id="p1" value="" /><br />
      <label for="p2">7+5*3</label>
      <input type="text" id="p2" value="" /><br />
      <label for="p3">23*2</label>
      <input type="text" id="p3" value="" /><br />
      <label for="p4">35-7</label>
      <input type="text" id="p4" value="" /><br />
      <button>채점</button><span id="result"></span>
    </form>
    <script>
      const labels = document.querySelectorAll('label');
      const correctArr = new Array(labels.length);
      labels.forEach((label, index) => {
        correctArr[index] = eval(label.innerText);
      });
      console.log(correctArr);

      const form = document.querySelector('form');
      const inputs = document.querySelectorAll('input');
      let count = 0;
      const result = document.querySelector('#result');

      form.addEventListener('submit', (event) => {
        event.preventDefault();
        count = 0;
        inputs.forEach((input, index) => {
          if (correctArr[index] != input.value) {
            labels[index].style.textDecoration = 'line-through';
          } else {
            labels[index].style.textDecoration = 'none';
            count++;
          }
        });
        result.innerText = count;
        // label수만큼 즉, 다 맞으면 alert.
        // 함수가 종료되지 않아서 경고가 뜬다..
        if (count == labels.length) {
          alert('축하합니다. 100점 입니다!');
        }
      });
    </script>
  </body>
</html>
